<!DOCTYPE html>
 <html lang="en">
  <head>
		<title>Kevin Shao</title>
		<!-- link to main stylesheet -->
		<link rel="stylesheet" type="text/css" href="/css/project-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@900&family=Oswald:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;1,300&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" rel="stylesheet">
    <script src="test2.js"></script>
	</head>
	<body>
    <header>
      <section id="nav-bar">
        <h1>Kevin Shao</h1>
        <nav>
          <a href="/#profile-section">Home</a>
          <a href="/#research">Research</a>
          <a href="/#project">Project</a>
          <a href="/#teaching">Teaching</a>
          <a href="/#publications">Publications</a>
        </nav>
      </section>
    </header>

    <section id="project-page">
      <h2>Making Electric Vehicle Charging Fun</h2>
      <h3>Sponsor: Ford Motor Company, Envorso</h3>
      <h4>Collaborators: Gerin Thomas George, Moska Jamali, Rico Li, Brendan Oquist, Diana Verduzco, Bryan Vo</h4>
      <div class="buttons">
        <a href="https://www.engr.washington.edu/news/article/2023-04-04/job-experience-classroom" class="button">UW ECE</a>
      </div>

      <img src="img/capstone.png" alt="TBD">
      <div class="proj2-intro">
        <h3 class="title">Introduction</h3>
        <!--<img src="img/project_thumb.png" alt="Logo" class="logo">-->
        <p>
          The project “Making Electric Vehicle Charging Fun” is sponsored by Ford and Envorso. This project
          aims to create a solution that can monitor and analyze the data generated by EV chargers, to determine
          their health and performance. The system will gather charging data from the car, such as charging voltage,
          current, and other relevant parameters, and use utilize machine learning make inferences about the state
          of the charger. The goal of this project is to provide a reliable and accurate assessment of whether or
          not chargers are working, to generate a more positive charging experience for EV owners.

          <!--There are three primary objectives for this project which are tied to the three sub teams.
          <ul>
            <li>Hardware - Collect raw data from CAN bus of Mustang Mach-E, pack them up as Ethernet packets, and send
              to Raspberry Pi for storage. Build BLE scripts in Raspberry Pi to connect and transfer raw data to mobile
              devices through Bluetooth module.</li>
            <li>Software – Develop a cloud computing system that can analyze the raw data collected by the hardware team,
              determine the health of an electric vehicle charger and estimated charge time using machine learning, and
              send statistics back to the iOS app.</li>
            <li>UX/UI - Create an iOS app that will be able to display a map that lets users see the state of EVs and
              chargers near them to easily identify which chargers are broken or not working perfectly.</li>
          </ul>-->
        </p>
      </div>

      <h3 class="title">How Does It Work?</h3>
      <img src="img/ev-sys-dig.png" alt="Image 2" class="full">
      <p>
        The diagram above shows the full system design. The team used hardware that interprets firmware data of Mach-E and
        implemented Bluetooth connectivity that allows for real-time updates of charging station statistics to the cloud server.
      </p>
      <h4 class="subtitle">Hardware System Design</h4>
      <div class="image-text-container">
        <img src="img/hardware-system.png" alt="Image 1" class="image-50">
        <div class="text-50">
          <p>
            The hardware system is made up of several modules with different functionalities, among
            which the most important ones are the OBD2, the Charge Angel AVFS Box (installed with
            Raspberry Pi inside) and the Wireshark Box.
            <ul>
              <li>AVFS/RPi triggers data collection upon detecting a "plug in" event via CAN from J1772 or CCS1 ports.</li>
              <li>Wireshark Box outputs ethernet packets; RPi records these using tcpdump.</li>
              <li>Once unplugged, RPi saves Ethernet traffic as a pcap file and logs CAN data from plug in to unplug.</li>
              <li>Data is retrieved by downloading zipped files from RPi's remote server to localhost.</li>
              <li>Raw SoC data is sent to phones in real-time using the Bluetooth module in the Charge Angel AVFS Box.</li>
            </ul>
          </p>
        </div>
      </div>
      <h4 class="subtitle">Software System Design</h4>
      <img src="img/software-system.png" alt="Image 2" class="full">
      <p>
        The implementation of the software system is composed of four stages:
        <ul>
          <li>Import the raw data from the raspberry pi to Azure database.</li>
          <li>Perform backend computations on the cloud server.</li>
          <li>Identify EV chargers’ health conditions and approximate charging time via computation results.</li>
          <li>Export results to iOS App to display.</li>
        </ul>
      </p>
      <br>
      <div class="image-text-container">
        <img src="img/clould-computing-system.png" alt="Image 1" class="image-50">
        <div class="text-50">
          <p>
            The cloud computing portion of the system occurs sequentially.
            <ul>
              <li>Raw charging data is sent from the iOS app to Azure SQL via an Azure Function HTTP
                  trigger, using a POST request implemented in Swift.</li>
              <li>The Azure function loads and uses the appropriate AC or DC machine learning model,
                  based on the 'charge_type' parameter, to classify the charger and estimate charge time.</li>
              <li>After processing, results are formatted and asynchronously sent back to the iOS app
                  via an HTTP response, and simultaneously uploaded to the SQL database.</li>
            </ul>
            To be clear, the HTTP response is not generated by the 'model.predict' function; instead,
            it is the Azure UploadData function that handles this task. However, the system diagram
            was designed to show sequentiality, in which ‘model.predict’ is the last event that happens
            before our data is uploaded and returned to the user.
          </p>
        </div>
      </div>
      <h4 class="subtitle">UI/UX System Design</h4>
      <div class="image-text-container">
        <img src="img/ux-system.png" alt="Image 1" class="image-50">
        <div class="text-50">
          <p>
            The UI/UX system design is composed of two subsystems. The first subsystem includes
            retrieving raw data from the Charge Angel AVSF Box used by the hardware team. From
            the Bluetooth module, the iOS app will display real-time data. The second subsystem
            includes retrieving data from the cloud which we get from the Azure Database and
            display the charging data on the iOS app.
          </p>
        </div>
      </div>


      <h3 class="title">Results and Analysis</h3>
      <h4 class="subtitle">Hardware</h4>
      <ul>
        <li>Raspberry Pi utilizes Bluetooth for stable file transfer to the app, supporting full file storage system implementation.</li>
        <li>Script implemented on Raspberry Pi for automatic Bluetooth advertising upon power-up, enhancing user convenience.</li>
        <li>Automatic start-up of Bluetooth advertising takes approximately 45 seconds, due to inherent hardware and protocol initialization delays.</li>
      </ul>
      <h4 class="subtitle">Software</h4>
      <p>
        The result of ML models are listed below. The performance of DC models are better than ACs’, which is caused by the lack of AC data.
      </p>
      <img src="img/Train-result.png" alt="Image 2" class="full">
      <p>
        As demostrated in the table below, our Azure function which receives, classifies, and returns data often completes operations in the range of 100-200 milliseconds, with the worst-case scenario cold starts taking a few seconds. This allows users to get charge time updates in real time.
      </p>
      <img src="img/Azure-Function-performance.png" alt="Image 2" class="full">
      <h4 class="subtitle">UI/UX System</h4>
      <p>
        The map functionality worked as expected by showing nearby charging stations, routing the user
        to the station using Apple maps, and allowing the user to favorite stations and see information
        about them. The search functionality also worked to allow users to look for a specific charging
        station and view detailed information on the station. The live charging updates also displayed
        voltage draw, current draw, and charging rate. Additional details like charging time and the
        classification of the charger (broken or working) were also added. The bluetooth functionality
        was also working as expected where we were able to see the files received.
      </p>
      <div class="image-container">
        <figure>
          <img src="img/cap4.png" alt="Image 1" class="image">
        </figure>
        <figure>
          <img src="img/cap6.png" alt="Image 1" class="image">
        </figure>
        <figure>
          <img src="img/cap7.png" alt="Image 2" class="image">
        </figure>
        <figure>
          <img src="img/cap5.png" alt="Image 1" class="image">
        </figure>
        <figure>
          <img src="img/cap8.png" alt="Image 2" class="image">
        </figure>
      </div>
    </section>


		<footer>
      <div class="footer-section left">
        <p id="last-updated">Last Updated: <span id="update-date"></span></p>
      </div>
      <div class="footer-section center">
        <p>
          <!--Site created by Kevin Shao. All other attributions cited in page source.-->
          © Kevin Shao. All Rights Reserved.
        </p>
      </div>
      <div class="footer-section right"></div> <!-- Invisible spacer -->
    </footer>
	</body>
</html>